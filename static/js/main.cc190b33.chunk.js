(this.webpackJsonpavalon=this.webpackJsonpavalon||[]).push([[0],{31:function(e,t,n){e.exports=n(47)},36:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(25),o=n.n(i),l=(n(36),n(1)),u=n.n(l),s=n(2),c=n(11),d=n(7),m=n(3),p=n(4),h=n(5),f=n(6),v=n(8),y=n(9),b=n(26),g=n.n(b),k=n(27),E=n.n(k),w=n(17),j=n.n(w);n(40);E.a.config();var O,x={apiKey:"AIzaSyAEz0EOh3rS5AQ1XyG4YQcHVtI9QvjbLQY",authDomain:"avalon-db-d62ad.firebaseapp.com",databaseURL:"https://avalon-db-d62ad.firebaseio.com",projectId:"avalon-db-d62ad",storageBucket:"avalon-db-d62ad.appspot.com",messagingSenderId:"964793644074",appId:"1:964793644074:web:1cce0c458aa896732fbf53",measurementId:"G-E2SERHMFE4"},R=new(function(){function e(){Object(m.a)(this,e),this.db=void 0,this.isOnline=!0,j.a.initializeApp(x),this.db=j.a.database()}return Object(p.a)(e,[{key:"getAllGames",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching all game data"),e.abrupt("return",new Promise((function(e,n){t.db.ref("game").once("value",(function(t){var n=t.val();console.log("got all games:",n),e(Object.values(n||{}))}))})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"kickPlayer",value:function(){var e=Object(s.a)(u.a.mark((function e(t,n){var r,a,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.gid,a=t.nominations,i=t.players,o=t.turn,l=t.mission,a.roster=(a.roster||[]).filter((function(e){return e!==n})),delete(a.tally||{})[n],delete(i||{})[n],o&&(o.order=o.order.filter((function(e){return e!==n})),o.current===n&&(o.current=o.order[0])),delete(l.tally||{})[n],e.next=8,this.updateNominations(r,a);case 8:return e.next=10,this.updatePlayers(r,i);case 10:return e.next=12,this.updateTurn(r,o);case 12:return e.next=14,this.updateMission(r,l);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteAllGames",value:function(){return this.db.ref("game").set({})}},{key:"hidePlayers",value:function(e){return this.db.ref("game/".concat(e,"/reveal")).set(!1)}},{key:"revealPlayers",value:function(e){return this.db.ref("game/".concat(e,"/reveal")).set(!0)}},{key:"giveLadyTo",value:function(e,t){return this.db.ref("game/".concat(e,"/players/").concat(t,"/hasLady")).set(!0)}},{key:"takeLadyFrom",value:function(e,t){return this.db.ref("game/".concat(e,"/players/").concat(t,"/hasLady")).set(!1)}},{key:"ladySaw",value:function(e,t,n){return this.db.ref("game/".concat(e,"/players/").concat(t,"/sawLady")).set(n)}},{key:"setIncludeLady",value:function(e,t){return this.db.ref("game/".concat(e,"/includeLady")).set(t)}},{key:"clearMission",value:function(e){return this.updateMission(e,{showResults:!1,tally:{}})}},{key:"clearNominations",value:function(e){return this.updateNominations(e,{roster:[],dealerLocked:!1,showResults:!1,tally:{}})}},{key:"updateGame",value:function(e){return console.log("saving data:",e),this.db.ref("game/".concat(e.gid)).set(e)}},{key:"updateBoard",value:function(e,t){return this.db.ref("game/".concat(e,"/board")).set(t)}},{key:"updateMission",value:function(e,t){return this.db.ref("game/".concat(e,"/mission")).set(t)}},{key:"updateMissionTally",value:function(e,t,n){return this.db.ref("game/".concat(e,"/mission/tally/").concat(t)).set(n)}},{key:"updateNominations",value:function(e,t){return this.db.ref("game/".concat(e,"/nominations")).set(t)}},{key:"updateNominationsTally",value:function(e,t,n){return this.db.ref("game/".concat(e,"/nominations/tally/").concat(t)).set(n)}},{key:"updatePlayers",value:function(e,t){return this.db.ref("game/".concat(e,"/players")).set(t)}},{key:"updateRoles",value:function(e,t){return this.db.ref("game/".concat(e,"/roles")).set(t)}},{key:"updateTurn",value:function(e,t){return this.db.ref("game/".concat(e,"/turn")).set(t||null)}},{key:"updateVetoes",value:function(e,t){return this.db.ref("game/".concat(e,"/vetoes")).set(t)}},{key:"getGameData",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("fetching game data"),e.abrupt("return",new Promise((function(e,r){n.db.ref("game/".concat(t)).once("value",(function(t){var n=t.val();console.log("got game data:",n),e(n)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"joinGame",value:function(e,t){return console.log("enabling hook:",e),this.db.ref("game/".concat(e)).on("value",(function(e){t(e.val())}))}},{key:"leaveGame",value:function(e){return console.log("disabling hook:",e),this.db.ref("game/".concat(e)).off("value")}}]),e}()),L=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={games:[]},e.promise=void 0,e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.promise=g()(R.getAllGames()),this.promise.then((function(t){return e.setState({games:t})}))}},{key:"componentWillUnmount",value:function(){this.promise&&this.promise.trash()}},{key:"render",value:function(){var e=this.state.games;return a.a.createElement("div",null,a.a.createElement("h1",null,"Debugging Health Info"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://mpaulweeks.github.io/avalon/"},"mpaulweeks.github.io/avalon")),a.a.createElement("h3",null,"games"),e.map((function(e){return a.a.createElement("div",{key:e.gid},e.gid,Object.values(e.players).map((function(t,n){return a.a.createElement("span",{key:n+"-"+t.pid,onClick:function(){return R.kickPlayer(e,t.pid)}},"\xa0/ ",t.name)})))})),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return R.deleteAllGames()}}," delete all "))}}]),n}(a.a.Component);!function(e){e.Loading="loading",e.Lobby="lobby",e.All="all",e.Board="board",e.Nominate="nominate",e.Mission="mission",e.Lady="lady",e.Setup="setup",e.Reset="reset",e.Debug="debug",e.Rules="rules"}(O||(O={}));var C="success",N="fail",M="approve",S="reject",A={Blue:"blue victory",Red:"red victory",Neutral:"neutral"},G=Object.values(A),F=["BasicBlue","Merlin","Percival","BasicRed","Assassin","Mordred","Morgana","Oberon"],T=F.reduce((function(e,t){return e[t]=t,e}),{}),B=[T.BasicRed,T.Assassin,T.Morgana,T.Mordred,T.Oberon],I=B.filter((function(e){return e!==T.Mordred})),P=B.filter((function(e){return e!==T.Oberon})),q={BasicBlue:{isRed:!1,name:"Basic Blue",description:"You know nothing. Good luck!",sees:[]},Merlin:{isRed:!1,name:"Merlin",description:"You see the Red players. Help the Blue team without revealing yourself.",sees:I},Percival:{isRed:!1,name:"Percival",description:"You see two players. One is your ally Merlin, the other is the enemy Morgana. You must figure out which is which.",sees:[T.Merlin,T.Morgana]},BasicRed:{isRed:!0,name:"Basic Red",description:"You see your fellow Red players.",sees:P},Assassin:{isRed:!0,name:"Assassin",description:"You see your fellow Red players. If you can guess Merlin at the end of the game, you win.",sees:P},Mordred:{isRed:!0,name:"Mordred",description:"You see your fellow Red players. Merlin cannot see you",sees:P},Morgana:{isRed:!0,name:"Morgana",description:"You see your fellow Red players. Percival sees you and Merlin. Try to confuse them.",sees:P},Oberon:{isRed:!0,name:"Oberon",description:"You cannot see your fellow Red players and they cannot see you.",sees:[]}};function D(){var e=Object(v.a)(["\n  font-size: 4rem;\n  margin: 0.2em;\n  width: 1.5em;\n  height: 1.5em;\n  border: 1px solid black;\n  border-radius: 2em;\n  cursor: pointer;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  user-select: none;\n\n  ","\n"]);return D=function(){return e},e}function H(){var e=Object(v.a)([""]);return H=function(){return e},e}function V(){var e=Object(v.a)(["\n  display: flex;\n  flex-direction: horizontal;\n  text-align: center;\n  flex-wrap: nowrap;\n"]);return V=function(){return e},e}function Y(){var e=Object(v.a)(["\n  border-color: purple;\n  background-color: plum;\n"]);return Y=function(){return e},e}function U(){var e=Object(v.a)(["\n  margin: 1rem 0;\n  padding: 0.8rem;\n  border: 0.2rem solid green;\n"]);return U=function(){return e},e}function J(){var e=Object(v.a)(["\n  color: red;\n  font-weight: bold;\n"]);return J=function(){return e},e}function z(){var e=Object(v.a)(["\n  color: blue;\n  font-weight: bold;\n"]);return z=function(){return e},e}function Q(){var e=Object(v.a)(["\n  color: green;\n  font-weight: bold;\n"]);return Q=function(){return e},e}var W=y.a.span(Q()),K=y.a.span(z()),X=y.a.span(J()),_=y.a.div(U()),Z=Object(y.a)(_)(Y()),$=y.a.div(V()),ee=Object(y.a)($)(H()),te=y.a.div(D(),(function(e){return"\n    ".concat(e.result===A.Neutral?"\n      color: black;\n      background-color: white;\n    ":"","\n    ").concat(e.result===A.Blue?"\n      color: white;\n      background-color: blue;\n    ":"","\n    ").concat(e.result===A.Red?"\n      color: white;\n      background-color: red;\n    ":"","\n  ")})),ne=window.location.href.includes("localhost"),re=window.location.href.includes("?d");if(!re){var ae=console.log;console.log=function(){},ae("activate debug move to view logs".toUpperCase())}function ie(e,t){return function(e,t){return e.concat().sort((function(e,n){var r=t(e),a=t(n);return r<a?-1:r>a?1:0}))}(Object.values(e),t)}function oe(e){for(var t,n,r=e.concat(),a=r.length;0!==a;)n=Math.floor(Math.random()*a),t=r[a-=1],r[a]=r[n],r[n]=t;return r}function le(e){return(e.turn?e.turn.order:[]).map((function(t){return e.players[t]}))}function ue(e){var t=[{required:2,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:2,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral}];return 6===e&&(t=[{required:2,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:4,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:4,neededFails:1,result:A.Neutral}]),7===e&&(t=[{required:2,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:3,neededFails:1,result:A.Neutral},{required:4,neededFails:2,result:A.Neutral},{required:4,neededFails:1,result:A.Neutral}]),e>=8&&(t=[{required:3,neededFails:1,result:A.Neutral},{required:4,neededFails:1,result:A.Neutral},{required:4,neededFails:1,result:A.Neutral},{required:5,neededFails:2,result:A.Neutral},{required:5,neededFails:1,result:A.Neutral}]),{vetos:0,missions:t}}var se=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pid=e.props.storage.pid,e.state={},e}return Object(p.a)(n,[{key:"getMyRole",value:function(){var e=this.props,t=e.storage,n=e.data.players[t.pid]||{name:t.name};return q[n.role||T.BasicBlue]}},{key:"voteSuccess",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateMissionTally(this.props.data.gid,this.pid,C);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"voteFail",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateMissionTally(this.props.data.gid,this.pid,N);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"voteClear",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(d.a)({},this.props.data.mission)).tally={},t.showResults=!1,e.next=5,R.updateMission(this.props.data.gid,t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleReveal",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(d.a)({},this.props.data.mission)).showResults=!t.showResults,e.next=4,R.updateMission(this.props.data.gid,t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.isHost,r=t.data,i=r.nominations,o=r.mission,l=i.roster.includes(this.pid),u=le(r).filter((function(e){return i.roster.includes(e.pid)&&!o.tally[e.pid]}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Mission Vote"),l?a.a.createElement("div",null,a.a.createElement("h3",null," cast your mission vote "),o.tally[this.pid]?a.a.createElement("div",null," you have voted "):a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.voteSuccess()}},"vote SUCCESS"),a.a.createElement("button",{onClick:function(){return e.voteFail()}},"vote FAIL"))):a.a.createElement("div",null,"only nominated players can vote during the mission"),a.a.createElement("h3",null,"results!"),o.showResults&&Object.keys(o.tally).length?a.a.createElement("div",null,Object.values(o.tally).sort().reverse().map((function(e,t){return a.a.createElement("div",{key:t},e===C?a.a.createElement(W,null,e.toUpperCase()):a.a.createElement(X,null,e.toUpperCase()))}))):a.a.createElement("div",null,Object.keys(o.tally).length,"/",i.roster.length," votes counted",u.length?a.a.createElement("div",null,a.a.createElement("br",null),"waiting for:",u.map((function(e){return a.a.createElement("div",{key:e.pid},e.name)}))):""),n&&a.a.createElement(Z,null,a.a.createElement("button",{onClick:function(){return e.toggleReveal()}},o.showResults?"hide":"show"," votes"),a.a.createElement("button",{onClick:function(){return e.voteClear()}},"clear all votes")))}}]),n}(a.a.Component),ce=n(15),de=new(function(){function e(){Object(m.a)(this,e),this.store=window.localStorage,this.onSet=function(){return Promise.resolve()}}return Object(p.a)(e,[{key:"getMinor",value:function(e){return(e||"0.0.0").split(".").slice(0,2).join(".")}},{key:"reset",value:function(){this.set({v:"1.4.0",pid:ce.hri.random(),name:void 0,gid:void 0,view:O.Reset})}},{key:"set",value:function(e){return this.store.setItem("state",JSON.stringify(e)),this.onSet(e)}},{key:"setName",value:function(e){return this.set(Object(d.a)({},this.get(),{name:e}))}},{key:"setGame",value:function(e){return this.set(Object(d.a)({},this.get(),{gid:e}))}},{key:"setView",value:function(e){return this.set(Object(d.a)({},this.get(),{view:e}))}},{key:"get",value:function(){var e=this.store.getItem("state")||"{}",t=JSON.parse(e);return t&&this.getMinor(t.v)===this.getMinor("1.4.0")?t:(this.reset(),this.get())}}]),e}()),me=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={tempName:ne?ce.hri.random().split("-")[0]:"",tempJoin:""},e}return Object(p.a)(n,[{key:"setName",value:function(){de.setName(this.state.tempName)}},{key:"render",value:function(){var e=this,t=this.props.storage,n=this.state,r=n.tempName,i=n.tempJoin;return t.name?a.a.createElement("div",null,a.a.createElement("h1",null,"Find a Game"),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.props.createGame()}},"create new game")),a.a.createElement("h3",null,"or"),a.a.createElement("div",null,a.a.createElement("input",{value:i,onChange:function(t){return e.setState({tempJoin:t.target.value})},placeholder:"enter game id"}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return e.props.joinGame(i)}},"join game"))):a.a.createElement("div",null,a.a.createElement("h1",null,"Enter your name"),a.a.createElement("input",{value:r,onChange:function(t){return e.setState({tempName:t.target.value})}}),a.a.createElement("button",{onClick:function(){return e.setName()}},"confirm"))}}]),n}(a.a.Component),pe=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"tryReset",value:function(){var e=!0;this.props.storage.gid&&(e=window.confirm("Are you sure you want to reset?\nIf you leave a game in progress, you will not be able to rejoin.")),e&&this.props.reset()}},{key:"render",value:function(){var e=this,t=this.props.storage;return a.a.createElement("div",null,a.a.createElement("h1",null,"Current Local State"),a.a.createElement("pre",null,JSON.stringify(t,null,2)),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.tryReset()}},"Leave game and reset local data")))}}]),n}(a.a.Component),he=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"nextTurn",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.data,n=t.gid,r=t.turn){e.next=3;break}return e.abrupt("return");case 3:return a=r.order.indexOf(r.current),i=(a+1)%r.order.length,o=r.order[i],e.next=8,R.updateTurn(n,Object(d.a)({},r,{current:o}));case 8:return e.next=10,R.clearNominations(n);case 10:return e.next=12,R.clearMission(n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"missionChange",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,o,l,s,c,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.isHost,a=n.data,r){e.next=3;break}return e.abrupt("return");case 3:return i=a.gid,o=a.board,l=o.missions[t],s=G.indexOf(l.result),c=(s+1)%G.length,d=G[c],l.result=d,e.next=11,R.updateBoard(i,o);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setMissionNoms",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.isHost,a=n.data,r){e.next=3;break}return e.abrupt("return");case 3:return i=a.gid,o=a.board,o.missions[t].roster=a.nominations.roster,e.next=8,R.updateBoard(i,o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearMissionNoms",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.isHost,a=n.data,r){e.next=3;break}return e.abrupt("return");case 3:return i=a.gid,o=a.board,o.missions[t].roster=null,e.next=8,R.updateBoard(i,o);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addVeto",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.isHost,a=n.data,r){e.next=3;break}return e.abrupt("return");case 3:return i=a.gid,o=a.vetoes,e.next=6,R.updateVetoes(i,o+t);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.isHost,r=t.data,i=r.board,o=r.turn,l=r.players,u=r.vetoes,s=i.missions.some((function(e){return e.neededFails>1}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Game Board"),o&&a.a.createElement("div",null,n&&a.a.createElement(Z,null,a.a.createElement("button",{onClick:function(){return e.nextTurn()}},"Next Turn"))),a.a.createElement(ee,null,i.missions.map((function(t,r){return a.a.createElement("div",{key:r},a.a.createElement(te,{result:t.result,onClick:function(){return e.missionChange(r)}},t.required),s&&(t.neededFails>1?a.a.createElement("div",null,t.neededFails," fails needed"):a.a.createElement("br",null)),t.roster&&t.roster.map((function(e){return a.a.createElement("div",{key:e},l[e].name)})),n&&a.a.createElement(Z,null,t.roster?a.a.createElement("button",{onClick:function(){return e.clearMissionNoms(r)}},"remove",a.a.createElement("br",null),"noms"):a.a.createElement("button",{onClick:function(){return e.setMissionNoms(r)}},"set",a.a.createElement("br",null),"noms")))}))),a.a.createElement("div",null,"Missions are played left to right. The number is how many people are required for each mission.",a.a.createElement("br",null),"It only takes 1 FAIL to win the mission for Red. First team to 3 missions wins."),a.a.createElement("h3",null,"Vetoes: ",u,"/4"),a.a.createElement("div",null,"When the number of vetoes reaches 4, the nomination automatically goes to mission without a group vote."),n&&a.a.createElement(Z,null,a.a.createElement("button",{onClick:function(){return e.addVeto(1)}},"+"),a.a.createElement("button",{onClick:function(){return e.addVeto(-1)}},"-")))}}]),n}(a.a.Component),fe=n(10);function ve(){var e=Object(v.a)(["\n  color: red;\n"]);return ve=function(){return e},e}function ye(){var e=Object(v.a)(["\n  cursor: pointer;\n  text-decoration: underline;\n  color: red;\n"]);return ye=function(){return e},e}var be=y.a.span(ye()),ge=y.a.span(ve()),ke=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(p.a)(n,[{key:"addRole",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(fe.a)(this.props.data.roles)).push(t),n.sort(),e.next=5,R.updateRoles(this.props.data.gid,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeRole",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(fe.a)(this.props.data.roles),!((r=n.findIndex((function(e){return e===t})))>=0)){e.next=6;break}return n.splice(r,1),e.next=6,R.updateRoles(this.props.data.gid,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"assign",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r,a,i,o,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.data,n=t.gid,r=t.players,a=t.roles,i=t.includeLady,Object.keys(r).length===a.length){e.next=3;break}return e.abrupt("return",this.setState({errorMessage:"you need the same number of roles as players"}));case 3:return this.setState({errorMessage:void 0}),o=oe(Object.keys(r)),l=oe(a),o.forEach((function(e,t){r[e].role=l[t],r[e].hasLady=!1,r[e].sawLady=null})),e.next=9,R.updateBoard(n,ue(a.length));case 9:return e.next=11,R.updatePlayers(n,r);case 11:return e.next=13,R.updateTurn(n,{current:o[0],order:o});case 13:return e.next=15,R.clearNominations(n);case 15:return e.next=17,R.clearMission(n);case 17:if(!i){e.next=20;break}return e.next=20,R.giveLadyTo(n,o.slice(-1)[0]);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tryReveal",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.data.gid,!window.confirm("Are you sure you want to reveal roles?\nThis cannot be undone and effectively ends the game.")){e.next=5;break}return e.next=5,R.revealPlayers(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.data,n=t.gid,r=t.players,Object.keys(r).forEach((function(e,t){r[e].role=null})),e.next=4,R.updatePlayers(n,r);case 4:return e.next=6,R.updateTurn(n,null);case 6:return e.next=8,R.hidePlayers(n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderReveal",value:function(e){return a.a.createElement("ul",null,e.map((function(e,t){var n=e.role&&q[e.role],r=n?n.name:"???",i=n&&n.isRed?X:K;return a.a.createElement("li",{key:t},e.name,": ",a.a.createElement(i,null,r))})))}},{key:"renderRoles",value:function(e,t){var n=this;return a.a.createElement("ul",null,e.map((function(e,r){var i=q[e],o=i.isRed?X:K;return a.a.createElement("li",{key:r},t&&a.a.createElement(be,{onClick:function(){return n.removeRole(e)}},"X"),"\xa0",a.a.createElement(o,null,i.name),"\xa0",a.a.createElement("i",null,"(",i.description,")"))})))}},{key:"renderAdd",value:function(e){var t=this;return a.a.createElement("div",null,e.map((function(e,n){return a.a.createElement("button",{key:n,onClick:function(){return t.addRole(e)}},q[e].name)})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.isHost,r=t.data,i=this.state.errorMessage,o=ie(r.players,(function(e){return e.name})),l=o.some((function(e){return e.role})),u=n&&!l,s=l?le(r):o,c=Object.values(r.roles).filter((function(e){return q[e].isRed})),d=Object.values(r.roles).filter((function(e){return!q[e].isRed}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Setup"),a.a.createElement("h3",null,"Players: ",s.length),a.a.createElement("div",null,s.map((function(e){return e.name})).join(", ")),n&&a.a.createElement(Z,null,l?r.reveal?a.a.createElement("button",{onClick:function(){return e.clear()}},"Clear roles and reset game"):a.a.createElement("button",{onClick:function(){return e.tryReveal()}},"Reveal all roles"):a.a.createElement("div",null,this.renderAdd(F.filter((function(e){return q[e].isRed}))),a.a.createElement("br",null),this.renderAdd(F.filter((function(e){return!q[e].isRed}))),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return R.setIncludeLady(r.gid,!r.includeLady)}},r.includeLady?"Lady of the Lake is ON":"Lady of the Lake is OFF")),a.a.createElement("br",null),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.assign()}},"ASSIGN ROLES"),i&&a.a.createElement(ge,null,i)))),r.reveal&&a.a.createElement("div",null,a.a.createElement("h3",null,"GAME OVER! This was everyone's identity:"),this.renderReveal(s)),a.a.createElement("h3",null,"Red Roles (",c.length,")"),this.renderRoles(c,u),a.a.createElement("h3",null,"Blue Roles (",d.length,")"),this.renderRoles(d,u),n&&a.a.createElement(Z,null,a.a.createElement("h3",null,"Kick Player"),a.a.createElement("p",null,"Mostly an emergency tool if someone resets their info.",a.a.createElement("br",null),"If the player refreshes without resetting their info, they will rejoin."),o.map((function(e){return a.a.createElement("button",{key:e.pid,onClick:function(){return R.kickPlayer(r,e.pid)}},e.name)}))))}}]),n}(a.a.Component);function Ee(){var e=Object(v.a)(["\n  border-color: black;\n  background-color: #eeeeee;\n\n  & span {\n    margin: 0 0.1em;\n  }\n"]);return Ee=function(){return e},e}function we(){var e=Object(v.a)(["\n  background-color: black;\n  color: white;\n  border-color: red;\n  cursor: pointer;\n"]);return we=function(){return e},e}var je=Object(y.a)(_)(we()),Oe=Object(y.a)(_)(Ee()),xe=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={collapseSecrets:!1},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.storage,r=t.data,i=this.state.collapseSecrets,o=r.players[n.pid]||{name:n.name},l=q[o.role||T.BasicBlue],u=(r.turn?r.turn.order:[]).filter((function(e){return e!==n.pid})).map((function(e){return r.players[e]})).filter((function(e){return e.role&&l.sees.includes(e.role)})).map((function(e){return e.name})),s=r.nominations.roster.length>0?r.nominations.roster.map((function(e){return r.players[e].name})).join(", "):"(nobody)",c=r.turn?r.turn.order:le(r).map((function(e){return e.pid})),d=ie(r.players,(function(e){return e.name}));return a.a.createElement("div",null,a.a.createElement(je,{onClick:function(){return e.setState({collapseSecrets:!i})}},i?a.a.createElement("div",null,"(click to show secret info)"):a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("u",null,"SECRET INFO! do not discuss what's in this box! click to hide from nearby players!")),o.role?a.a.createElement("div",null,"you are: ",a.a.createElement("b",null,l.name),". you see: ",a.a.createElement("b",null,u.join(", ")||"(nobody)"),a.a.createElement("br",null),l.description):a.a.createElement("div",null,"roles haven't been assigned yet"))),a.a.createElement(Oe,null,r.turn?a.a.createElement("div",null,a.a.createElement("div",null,"turn order: ",c.map((function(e,t,n){var i=r.players[e],o=(i?i.name:"???")+(t<n.length-1?",":""),l={color:e===r.host?"purple":"black",textDecoration:r.turn&&e===r.turn.current?"underline":"none"};return a.a.createElement("span",{key:e,style:l},o)}))),a.a.createElement("div",null,"nomination: ",s)):a.a.createElement("div",null,"players: ",d.map((function(e){return e.name})).join(", "))))}}]),n}(a.a.Component),Re=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pid=e.props.storage.pid,e.state={},e}return Object(p.a)(n,[{key:"voteSuccess",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateNominationsTally(this.props.data.gid,this.pid,M);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"voteFail",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateNominationsTally(this.props.data.gid,this.pid,S);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"voteClear",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(d.a)({},this.props.data.nominations)).tally={},t.showResults=!1,t.dealerLocked=!1,e.next=6,R.updateNominations(this.props.data.gid,t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleReveal",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Object(d.a)({},this.props.data.nominations)).showResults=!t.showResults,e.next=4,R.updateNominations(this.props.data.gid,t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lockTheNoms",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.getIsDealer()){e.next=3;break}return e.abrupt("return",alert("only the dealer should be able to lock the nom! error!"));case 3:return(t=Object(d.a)({},this.props.data.nominations)).dealerLocked=!0,e.next=7,R.updateNominations(this.props.data.gid,t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getIsDealer",value:function(){var e=this.props.data,t=e.nominations;return e.turn&&e.turn.current===this.pid&&!t.showResults}},{key:"addToRoster",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.data.nominations,(r=Object(fe.a)(n.roster)).push(t),r.sort(),e.next=6,R.updateNominations(this.props.data.gid,Object(d.a)({},n,{roster:r}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"removeFromRoster",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.data.nominations,r=Object(fe.a)(n.roster),!((a=r.findIndex((function(e){return e===t})))>=0)){e.next=7;break}return r.splice(a,1),e.next=7,R.updateNominations(this.props.data.gid,Object(d.a)({},n,{roster:r}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.isHost,r=t.data,i=r.nominations,o=r.players,l=this.getIsDealer(),u=le(r),s=u.filter((function(e){return!i.roster.includes(e.pid)})),c=Object.keys(i.tally).sort(),d=u.filter((function(e){return!i.tally[e.pid]})),m=r.board.missions.filter((function(e){return e.result===A.Neutral}))[0],p=m?m.required:"???";return a.a.createElement("div",null,a.a.createElement("h1",null,"Nominate for Mission"),a.a.createElement("div",null,"This mission requires ",p," people."),a.a.createElement("h3",null,"Nominated:"),a.a.createElement("div",null,i.roster.length?l&&!i.dealerLocked?i.roster.map((function(t,n){return a.a.createElement("button",{key:n,onClick:function(){return e.removeFromRoster(t)}},o[t].name)})):i.roster.map((function(e){return o[e].name})).join(", "):"nobody has been nominated yet"),l&&(i.dealerLocked?a.a.createElement("div",null,a.a.createElement("br",null),a.a.createElement("button",{onClick:function(){return e.voteClear()}},"Clear votes and change the nomination")):a.a.createElement("div",null,a.a.createElement("h3",null,"Add to Nomination:"),a.a.createElement("div",null,s.length>0?s.map((function(t,n){return a.a.createElement("button",{key:n,onClick:function(){return e.addToRoster(t.pid)}},t.name)})):"everyone has been nominated"))),i.dealerLocked?a.a.createElement("div",null,a.a.createElement("h3",null,"cast your vote for who goes on the mission"),i.tally[this.pid]&&a.a.createElement("div",null,"you have voted"),!i.showResults&&a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.voteSuccess()}},"vote SUPPORT"),a.a.createElement("button",{onClick:function(){return e.voteFail()}},"vote REJECT")),n&&a.a.createElement(Z,null,a.a.createElement("button",{onClick:function(){return e.toggleReveal()}},i.showResults?"hide":"show"," votes"),a.a.createElement("button",{onClick:function(){return e.voteClear()}},"clear all votes")),a.a.createElement("h3",null,"results!"),i.showResults&&Object.keys(i.tally).length?a.a.createElement("div",null,c.map((function(e,t){return a.a.createElement("div",{key:t},r.players[e].name,":\xa0",i.tally[e]===M?a.a.createElement(W,null,i.tally[e].toUpperCase()):a.a.createElement(X,null,i.tally[e].toUpperCase()))}))):a.a.createElement("div",null,Object.keys(i.tally).length,"/",u.length," votes counted",d.length?a.a.createElement("div",null,a.a.createElement("br",null),"waiting for:",d.map((function(e){return a.a.createElement("div",{key:e.pid},e.name)}))):"")):a.a.createElement("div",null,a.a.createElement("h3",null,"waiting for nomination to be locked in..."),l&&a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return e.lockTheNoms()}},"Lock and start voting"))))}}]),n}(a.a.Component),Le=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).pid=e.props.storage.pid,e.state={},e}return Object(p.a)(n,[{key:"examine",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.pid,r=this.props.data.gid,e.next=4,R.giveLadyTo(r,t);case 4:return e.next=6,R.takeLadyFrom(r,n);case 6:return e.next=8,R.ladySaw(r,n,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.data,n=t.players,r=t.includeLady,i=n[this.pid],o=i.sawLady&&n[i.sawLady],l=o&&o.role&&q[o.role],u=l&&l.isRed?X:K,s=le(t),c=s.filter((function(e){return e.hasLady}))[0],d=c&&c.name,m=s.filter((function(e){return!!e.sawLady})),p=s.filter((function(t){return t.pid!==e.pid&&!t.sawLady}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Lady of the Lake"),a.a.createElement("p",null,"At the beginning of the game, the Lady of the Lake (aka Lady) is given to the last player in the turn order."),a.a.createElement("p",null,"After the 2nd, 3rd, and 4th mission in finished, the player with the Lady will choose one player to examine."),a.a.createElement("p",null,"They will learn the team color (Red/Blue) of the chosen player. They will NOT learn their identity (eg: Merlin)."),a.a.createElement("p",null,"After this information is revealed, the Lady will transfer to the examined player, so that they may use it after the next mission."),a.a.createElement("p",null,"A player that used the Lady cannot have the Lady used on them."),r&&c?a.a.createElement("div",null,a.a.createElement("h3",null,d," has the Lady of the Lake"),m.length>0&&a.a.createElement("div",null,"Previous Lady holders: ",m.map((function(e){return e.name})).join(", ")),c.pid===this.pid&&a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement("u",null,"Choose a player to examine:")),a.a.createElement("div",null,p.map((function(t){return a.a.createElement("button",{key:t.pid,onClick:function(){return e.examine(t.pid)}},t.name)})))),o&&l&&a.a.createElement("h3",null,"You examined ",o.name," and saw ",a.a.createElement(u,null,l.isRed?"RED":"BLUE"))):a.a.createElement("h3",null,a.a.createElement(X,null,"Lady of the Lady is not enabled for this game")))}}]),n}(a.a.Component),Ce=function(e){return a.a.createElement("div",null,a.a.createElement(he,e),a.a.createElement(Re,e),a.a.createElement(se,e))},Ne=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"Rules (",a.a.createElement("a",{target:"_blank",href:"rules.pdf"},"Rulebook.pdf"),")"),a.a.createElement("div",null,a.a.createElement("img",{src:"roles.gif",alt:"character rules",style:{height:"auto",width:"106vh",maxWidth:"100%",border:"1px solid black"}})),a.a.createElement("div",null,a.a.createElement("i",null,"visualization courtesy of Adam Chawansky")))}}]),n}(a.a.Component);function Me(){var e=Object(v.a)(["\n  margin: 0 0.5em;\n  margin-top: 0;\n  border-color: #00000000;\n  border-top-width: 0;\n  & a {\n    color: inherit;\n  }\n\n  ","\n\n  ","\n\n  &:first-child {\n    margin-left: 0;\n  }\n"]);return Me=function(){return e},e}var Se=Object(y.a)(_)(Me(),(function(e){return e.hasLink?"\n    & span {\n      cursor: pointer;\n      text-decoration: underline;\n    }\n  ":""}),(function(e){return e.current?"\n    border-color: grey;\n  ":""})),Ae=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(m.a)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={storage:de.get()},e.Link=function(t){var n=t.type,r=n?function(){return de.setView(n)}:function(){};return a.a.createElement(Se,{current:n===e.state.storage.view,hasLink:!!n,onClick:r},a.a.createElement("span",null,t.children))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;de.onSet=function(t){return new Promise((function(n,r){e.setState({storage:t},n)}))};var t=this.state.storage;if(t.name&&t.gid)try{this.join(this.genGuestGameData())}catch(n){this.setState((function(){throw n}))}else de.setView(O.Lobby)}},{key:"genHostGameData",value:function(){var e=this.state.storage.pid;return Object(d.a)({},this.genGuestGameData(),{host:e})}},{key:"genGuestGameData",value:function(){var e=this.state.storage,t=e.pid,n=e.name,r=e.gid;if(!r)throw new Error("game should be set in localStorage");return{gid:r,host:void 0,board:ue(7),nominations:{showResults:!1,dealerLocked:!1,roster:[],tally:{}},roles:[],players:Object(c.a)({},t,{pid:t,name:n||"???",hasLady:!1,sawLady:null}),turn:null,vetoes:0,mission:{showResults:!1,tally:{}},includeLady:!1,reveal:!1}}},{key:"join",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,i,o,l,s=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.storage,!t.host){e.next=6;break}return e.next=4,R.updateGame(t);case 4:e.next=18;break;case 6:return e.next=8,R.getGameData(t.gid);case 8:if(r=e.sent){e.next=12;break}return this.reset(),e.abrupt("return");case 12:return a=n.pid,i=t.players[a],o=r.players[a]||{},l=Object(d.a)({},r.players,Object(c.a)({},a,Object(d.a)({},i,{},o,{name:i.name}))),e.next=18,R.updatePlayers(t.gid,l);case 18:return n.view===O.Lobby&&de.setView(O.All),e.next=21,R.joinGame(t.gid,(function(e){return s.onReceive(e)}));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReceive",value:function(e){console.log("received:",e),this.setState({data:Object(d.a)({roles:[],turn:null},e,{nominations:Object(d.a)({roster:[],tally:{}},e.nominations),mission:Object(d.a)({tally:{}},e.mission)})})}},{key:"createGame",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.setGame((t=3,Math.floor(Math.random()*Math.pow(10,t)).toString().padStart(t,"0")));case 2:return e.next=4,this.join(this.genHostGameData());case 4:case"end":return e.stop()}var t}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinGame",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de.setGame(t);case 2:return e.next=4,this.join(this.genGuestGameData());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.data,!(r=t.storage).gid){e.next=4;break}return e.next=4,R.leaveGame(r.gid);case 4:if(!n){e.next=7;break}return e.next=7,R.kickPlayer(n,r.pid);case 7:this.setState({data:void 0},(function(){return de.reset()}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderMain",value:function(){var e=this,t=this.state,n=t.storage,r=t.data,i=n.pid,o=n.view,l=!!r&&i===r.host;return o===O.All&&r?a.a.createElement(Ce,{isHost:l,data:r,storage:n}):o===O.Board&&r?a.a.createElement(he,{isHost:l,data:r,storage:n}):o===O.Setup&&r?a.a.createElement(ke,{isHost:l,data:r,storage:n}):o===O.Nominate&&r?a.a.createElement(Re,{isHost:l,data:r,storage:n}):o===O.Mission&&r?a.a.createElement(se,{isHost:l,data:r,storage:n}):o===O.Lady&&r?a.a.createElement(Le,{isHost:l,data:r,storage:n}):o!==O.Lobby||r?o===O.Reset?a.a.createElement(pe,{storage:n,reset:function(){return e.reset()}}):o===O.Debug?a.a.createElement(L,null):o===O.Rules?a.a.createElement(Ne,null):o===O.Loading?a.a.createElement("h3",null,"connecting to server, please wait..."):a.a.createElement("div",null,a.a.createElement("h3",null,"you have reached an invalid state :("),a.a.createElement("div",null,"view: ",o),a.a.createElement("div",null,"data: ",!!r),a.a.createElement("h3",null,"please try refreshing and/or reset your local state")):a.a.createElement(me,{storage:n,createGame:function(){return e.createGame()},joinGame:function(t){return e.joinGame(t)}})}},{key:"render",value:function(){var e=this.state,t=e.storage,n=e.data;return a.a.createElement("div",null,a.a.createElement("nav",null,a.a.createElement("ul",null,n&&a.a.createElement(this.Link,{type:O.All},"Game #",n.gid),n&&a.a.createElement(this.Link,{type:O.Board},"Board"),n&&a.a.createElement(this.Link,{type:O.Nominate},"Nominate"),n&&a.a.createElement(this.Link,{type:O.Mission},"Mission"),n&&a.a.createElement(this.Link,{type:O.Lady},"Lady of the Lake"),n&&a.a.createElement(this.Link,{type:O.Setup},"Setup"),!n&&a.a.createElement(this.Link,{type:O.Lobby},"Lobby"),a.a.createElement(this.Link,{type:O.Reset},"Reset"),re&&a.a.createElement(this.Link,{type:O.Debug},"Debug"),a.a.createElement(this.Link,{type:O.Rules},"Rules"),a.a.createElement(this.Link,null,"v.","1.4.0"))),n&&a.a.createElement(xe,{data:n,storage:t}),this.renderMain())}}]),n}(a.a.Component),Ge=function(e){Object(f.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(m.a)(this,n),(r=t.call(this,e)).state={hasError:!1},r.state={hasError:!1},r}return Object(p.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("error caught by boundary!",e,t),this.setState({hasError:!0})}},{key:"reset",value:function(){de.reset(),window.location.reload()}},{key:"render",value:function(){var e=this;return this.state.hasError?a.a.createElement("div",null,a.a.createElement("h1",null,"Something went wrong."),"Try refreshing first. If that doesn't work and you're stuck on this screen, ",a.a.createElement("button",{onClick:function(){return e.reset()}},"RESET LOCAL DATA")):this.props.children}}]),n}(a.a.Component);o.a.render(a.a.createElement(Ge,null,a.a.createElement(Ae,null)),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.cc190b33.chunk.js.map
{"version":3,"sources":["core/firebase.ts","fe/ViewDebug.tsx","core/types.ts","core/role.ts","fe/shared.tsx","core/utils.ts","fe/ViewMission.tsx","core/storage.ts","fe/ViewLobby.tsx","fe/ViewReset.tsx","fe/ViewGame.tsx","fe/ViewSetup.tsx","fe/ViewBar.tsx","fe/ViewNominate.tsx","fe/ViewHub.tsx","index.tsx"],"names":["config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","FIREBASE","db","isOnline","firebase","initializeApp","this","database","console","log","Promise","resolve","reject","ref","once","resp","data","val","Object","values","game","playerId","id","nominations","players","turn","votes","roster","filter","pid","tally","order","current","updateNominations","updatePlayers","updateTurn","updateVotes","set","gameId","callback","on","off","ViewDebug","state","games","getAllGames","then","setState","href","map","key","p","onClick","kickPlayer","name","deleteAllGames","React","Component","ViewTabType","VoteType","NominationType","MissionResultType","Blue","Red","Neutral","MissionResults","Roles","RoleType","reduce","obj","r","reds","BasicRed","Assassin","Morgana","Mordred","Oberon","redsMinusMordred","redsMinusOberon","AllRoles","BasicBlue","isRed","description","sees","Merlin","Percival","Green","styled","span","StyledBox","div","HostBox","Flex","Board","MissionIcon","props","result","isDev","window","location","includes","isDebug","orig","toUpperCase","sortObjVals","keyFunc","arr","concat","sort","a","b","ka","kb","shuffle","temporaryValue","randomIndex","array","currentIndex","length","Math","floor","random","getBoardFor","count","missions","required","neededFails","vetos","ViewMission","storage","me","role","newVotes","getMyRole","alert","showResults","isHost","isNom","pendingTally","voteSuccess","voteFail","keys","reverse","vote","i","toggleReveal","voteClear","STORAGE","store","localStorage","onSet","v","split","slice","join","hri","undefined","view","setItem","JSON","stringify","get","stored","getItem","parse","getMinor","reset","ViewLobby","tempName","tempJoin","setName","createGame","value","onChange","event","target","placeholder","joinGame","ViewReset","confirmed","confirm","tryReset","ViewGame","nextIndex","indexOf","newCurrent","mIndex","board","mission","nextState","updateBoard","delta","vetoes","updateVetoes","anyDoubleFails","some","m","nextTurn","index","missionChange","clearMissionNoms","setMissionNoms","addVeto","DeleteLink","ErrorMessage","ViewSetup","newRoles","roles","push","updateRoles","findIndex","splice","errorMessage","shuffledPlayers","shuffledRoles","forEach","canEdit","removeRole","addRole","isAssigned","redRoles","blueRoles","sortedPlayers","o","clear","renderAdd","assign","renderRoles","SecretBox","RoleBox","ViewBar","myData","youSee","playerIds","pdata","style","color","host","textDecoration","ViewNominate","newRoster","isDealer","outOfRoster","sortedTally","currentMission","currentNeeded","removeFromRoster","addToRoster","HeaderLink","hasLink","ViewHub","Link","type","setView","children","genGuestGameData","Error","localData","updateGame","getGameData","hostData","myId","localMe","remoteMe","onReceive","setGame","pow","toString","padStart","genHostGameData","leaveGame","renderMain","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d9c7552d.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/database';\nimport { BoardData, GameData, NominationData, PlayerData, Role, TurnData, VoteData } from './types';\n\nconst config = {\n  apiKey: \"AIzaSyAEz0EOh3rS5AQ1XyG4YQcHVtI9QvjbLQY\",\n  authDomain: \"avalon-db-d62ad.firebaseapp.com\",\n  databaseURL: \"https://avalon-db-d62ad.firebaseio.com\",\n  projectId: \"avalon-db-d62ad\",\n  storageBucket: \"avalon-db-d62ad.appspot.com\",\n  messagingSenderId: \"964793644074\",\n  appId: \"1:964793644074:web:1cce0c458aa896732fbf53\",\n  measurementId: \"G-E2SERHMFE4\"\n};\n\nclass FirebaseSingleton {\n  private db: firebase.database.Database;\n  isOnline = true;\n\n  constructor() {\n    firebase.initializeApp(config);\n    this.db = firebase.database();\n  }\n\n  // debug\n  async getAllGames() {\n    console.log('fetching all game data');\n    return new Promise<GameData[]>((resolve, reject) => {\n      this.db.ref(`game`).once('value', resp => {\n        const data = resp.val();\n        console.log('got all games:', data)\n        resolve(Object.values(data || {}) as GameData[]);\n      });\n    });\n  }\n  async kickPlayer(game: GameData, playerId: string) {\n    const { id, nominations, players, turn, votes } = game;\n    nominations.roster = (nominations.roster || []).filter(pid => pid !== playerId);\n    delete (nominations.tally || {})[playerId];\n    delete (players || {})[playerId];\n    if (turn) {\n      turn.order = turn.order.filter(pid => pid !== playerId);\n      if (turn.current === playerId) {\n        turn.current = turn.order[0];\n      }\n    }\n    delete (votes.tally || {})[playerId];\n    await this.updateNominations(id, nominations);\n    await this.updatePlayers(id, players);\n    await this.updateTurn(id, turn);\n    await this.updateVotes(id, votes);\n  }\n  deleteAllGames() {\n    this.db.ref(`game`).set({});\n  }\n\n  updateGame(data: GameData) {\n    console.log('saving data:', data);\n    return this.db.ref(`game/${data.id}`).set(data);\n  }\n  updateBoard(gameId: string, data: BoardData) {\n    return this.db.ref(`game/${gameId}/board`).set(data);\n  }\n  updateNominations(gameId: string, data: NominationData) {\n    return this.db.ref(`game/${gameId}/nominations`).set(data);\n  }\n  updatePlayers(gameId: string, data: PlayerData) {\n    return this.db.ref(`game/${gameId}/players`).set(data);\n  }\n  updateRoles(gameId: string, data: Role[]) {\n    return this.db.ref(`game/${gameId}/roles`).set(data);\n  }\n  updateTurn(gameId: string, data: TurnData | null) {\n    return this.db.ref(`game/${gameId}/turn`).set(data || null);\n  }\n  updateVetoes(gameId: string, data: number) {\n    return this.db.ref(`game/${gameId}/vetoes`).set(data);\n  }\n  updateVotes(gameId: string, data: VoteData) {\n    return this.db.ref(`game/${gameId}/votes`).set(data);\n  }\n\n  async getGameData(gameId: string) {\n    console.log('fetching game data');\n    return new Promise<GameData>((resolve, reject) => {\n      this.db.ref(`game/${gameId}`).once('value', resp => {\n        const data = resp.val();\n        console.log('got game data:', data)\n        resolve(data as GameData);\n      });\n    });\n  }\n\n  joinGame(gameId: string, callback: (val: any) => void): void {\n    console.log('enabling hook:', gameId);\n    this.db.ref(`game/${gameId}`).on('value', data => {\n      callback(data.val());\n    });\n  }\n  leaveGame(gameId: string): void {\n    console.log('disabling hook:', gameId);\n    this.db.ref(`game/${gameId}`).off('value');\n  }\n}\n\nexport const FIREBASE = new FirebaseSingleton();\n","import React from 'react';\nimport { GameData } from '../core/types';\nimport { FIREBASE } from '../core/firebase';\n\ninterface Props { }\ninterface State {\n  games: GameData[];\n}\n\nexport class ViewDebug extends React.Component<Props, State> {\n  state: State = {\n    games: [],\n  };\n\n  componentDidMount() {\n    FIREBASE.getAllGames().then(games => this.setState({ games: games, }));\n  }\n  render() {\n    const { games } = this.state;\n    return (\n      <div>\n        <h1>Debugging Health Info</h1>\n        <p>\n          <a href=\"https://mpaulweeks.github.io/avalon/\">mpaulweeks.github.io/avalon</a>\n        </p>\n        <h3>games</h3>\n        {games.map(game => (\n          <div key={game.id}>\n            {game.id}\n            {Object.values(game.players).map(p => (\n              <span key={p.id} onClick={() => FIREBASE.kickPlayer(game, p.id)}>\n                &nbsp;/ {p.name}\n              </span>\n            ))}\n          </div>\n        ))}\n        <br />\n        <button onClick={() => FIREBASE.deleteAllGames()}> delete all </button>\n      </div>\n    );\n  }\n}\n","// enums\n\nexport type ViewTab = 'loading' | 'lobby' | 'game' | 'nominate' | 'mission' | 'setup' | 'reset' | 'debug';\nexport const ViewTabType = {\n  Loading: 'loading' as ViewTab,\n  Lobby: 'lobby' as ViewTab,\n  Game: 'game' as ViewTab,\n  Nominate: 'nominate' as ViewTab,\n  Mission: 'mission' as ViewTab,\n  Setup: 'setup' as ViewTab,\n  Reset: 'reset' as ViewTab,\n  Debug: 'debug' as ViewTab,\n};\n\nexport type Vote = 'success' | 'fail';\nexport const VoteType = {\n  Success: 'success' as Vote,\n  Fail: 'fail' as Vote,\n};\n\nexport type Nomination = 'approve' | 'reject';\nexport const NominationType = {\n  Approve: 'approve' as Nomination,\n  Reject: 'reject' as Nomination,\n};\n\nexport type MissionResult = 'blue' | 'red' | 'neutral';\nexport const MissionResultType = {\n  Blue: 'blue victory' as MissionResult,\n  Red: 'red victory' as MissionResult,\n  Neutral: 'neutral' as MissionResult,\n};\nexport const MissionResults = Object.values(MissionResultType);\n\nexport const Roles = [\n  'BasicBlue',\n  'Merlin',\n  'Percival',\n  'BasicRed',\n  'Assassin',\n  'Mordred',\n  'Morgana',\n  'Oberon',\n] as const;\nexport type Role = typeof Roles[number];\nexport const RoleType = Roles.reduce((obj, r) => {\n  obj[r] = r;\n  return obj;\n}, {} as { [key in typeof Roles[number]]: Role });\n\n// interfaces\n\nexport interface MissionData {\n  result: MissionResult;\n  required: number;\n  neededFails: number;\n  roster?: string[] | null;\n}\n\nexport interface BoardData {\n  missions: MissionData[];\n  vetos: number;\n}\n\nexport interface PlayerData {\n  [key: string]: {\n    id: string;\n    name: string;\n    role?: Role | null;\n  }\n};\n\nexport interface TurnData {\n  current: string;\n  order: string[];\n};\n\nexport interface NominationData {\n  showResults: boolean;\n  roster: string[];\n  tally: {\n    [key: string]: Nomination;\n  };\n};\n\nexport interface VoteData {\n  showResults: boolean;\n  tally: {\n    [key: string]: Vote;\n  };\n};\n\nexport interface GameData {\n  id: string;\n  host?: string;\n  board: BoardData;\n  nominations: NominationData;\n  players: PlayerData;\n  roles: Role[];\n  turn: TurnData | null;\n  vetoes: number;\n  votes: VoteData;\n}\n\nexport interface UserState {\n  v: string;\n  id: string;\n  name?: string;\n  game?: string;\n  view: ViewTab;\n}\n","import { Role, Roles, RoleType } from './types';\n\nexport interface RoleData {\n  isRed: boolean;\n  name: string;\n  description: string;\n  sees: Role[];\n};\n\nconst reds = [RoleType.BasicRed, RoleType.Assassin, RoleType.Morgana, RoleType.Mordred, RoleType.Oberon];\nconst redsMinusMordred = reds.filter(r => r !== RoleType.Mordred);\nconst redsMinusOberon = reds.filter(r => r !== RoleType.Oberon);\n\nexport const AllRoles: { [key in typeof Roles[number]]: RoleData } = {\n  BasicBlue: {\n    isRed: false,\n    name: 'Basic Blue',\n    description: 'You know nothing. Good luck!',\n    sees: [],\n  },\n  Merlin: {\n    isRed: false,\n    name: 'Merlin',\n    description: 'Those are the red players.',\n    sees: redsMinusMordred,\n  },\n  Percival: {\n    isRed: false,\n    name: 'Percival',\n    description: 'You see two players. One is your ally Merlin, the other is the enemy Morgana. You must figure out which is which.',\n    sees: [RoleType.Merlin, RoleType.Morgana],\n  },\n  BasicRed: {\n    isRed: true,\n    name: 'Basic Red',\n    description: 'They are your fellow Red players.',\n    sees: redsMinusOberon,\n  },\n  Assassin: {\n    isRed: true,\n    name: 'Assassin',\n    description: 'They are your fellow Red players. You get to guess Merlin at the end of the game.',\n    sees: redsMinusOberon,\n  },\n  Mordred: {\n    isRed: true,\n    name: 'Mordred',\n    description: 'They are your fellow Red players. Merlin cannot see you',\n    sees: redsMinusOberon,\n  },\n  Morgana: {\n    isRed: true,\n    name: 'Morgana',\n    description: 'They are your fellow Red players. Percival sees you and Merlin. Try to confuse them.',\n    sees: redsMinusOberon,\n  },\n  Oberon: {\n    isRed: true,\n    name: 'Oberon',\n    description: 'You cannot see your Red allies.',\n    sees: [],\n  },\n};\n","import styled from 'styled-components';\nimport { MissionResult, MissionResultType } from '../core/types';\n\nexport const Green = styled.span`\n  color: green;\n  font-weight: bold;\n`;\nexport const Red = styled.span`\n  color: red;\n  font-weight: bold;\n`;\n\nexport const StyledBox = styled.div`\n  margin: 1rem 0;\n  padding: 0.8rem;\n  border: 0.2rem solid green;\n`;\n\nexport const HostBox = styled(StyledBox)`\n  border-color: purple;\n  background-color: plum;\n`;\n\nexport const Flex = styled.div`\n  display: flex;\n  flex-direction: horizontal;\n  text-align: center;\n  flex-wrap: nowrap;\n`;\n\nexport const Board = styled(Flex)``;\n\nexport const MissionIcon = styled.div<{ result: MissionResult }>`\n  font-size: 4rem;\n  margin: 0.2em;\n  width: 1.5em;\n  height: 1.5em;\n  border: 1px solid black;\n  border-radius: 2em;\n  cursor: pointer;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  user-select: none;\n\n  ${props => `\n    ${props.result === MissionResultType.Neutral ? `\n      color: black;\n      background-color: white;\n    `: ''}\n    ${props.result === MissionResultType.Blue ? `\n      color: white;\n      background-color: blue;\n    `: ''}\n    ${props.result === MissionResultType.Red ? `\n      color: white;\n      background-color: red;\n    `: ''}\n  `}\n`;\n","import { MissionResultType } from \"./types\";\n\nexport const APP_VERSION = '1.2.5';\n\nexport const isDev = window.location.href.includes('localhost');\nexport const isDebug = window.location.href.includes('#d');\nif (!isDebug) {\n  const orig = console.log;\n  console.log = (...args: any[]) => { };\n  orig('activate debug move to view logs'.toUpperCase());\n}\n\nexport function randomId(length: number) {\n  return Math.floor(Math.random() * Math.pow(10, length)).toString().padStart(length, '0');\n}\n\nexport function sort<T, E>(arr: T[], keyFunc: (key: T) => E) {\n  return arr.concat().sort((a, b) => {\n    const ka = keyFunc(a);\n    const kb = keyFunc(b);\n    if (ka < kb) { return -1; }\n    if (ka > kb) { return 1; }\n    return 0;\n  });\n}\n\nexport function sortObjVals<T, E>(obj: { [key: string]: T }, keyFunc: (key: T) => E) {\n  return sort(Object.values(obj), keyFunc);\n}\n\n/**\n * Randomly shuffle an array\n * https://stackoverflow.com/a/2450976/1293256\n * @param  {Array} array The array to shuffle\n * @return {String}      The first item in the shuffled array\n */\nexport function shuffle<T>(orig: T[]): T[] {\n  const array = orig.concat();\n  var currentIndex = array.length;\n  var temporaryValue, randomIndex;\n\n  // While there remain elements to shuffle...\n  while (0 !== currentIndex) {\n    // Pick a remaining element...\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    // And swap it with the current element.\n    temporaryValue = array[currentIndex];\n    array[currentIndex] = array[randomIndex];\n    array[randomIndex] = temporaryValue;\n  }\n  return array;\n};\n\nexport function getBoardFor(count: number) {\n  let missions = [ // === 5\n    { required: 2, neededFails: 1, result: MissionResultType.Neutral },\n    { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n    { required: 2, neededFails: 1, result: MissionResultType.Neutral },\n    { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n    { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n  ];\n  if (count === 6) {\n    missions = [\n      { required: 2, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 1, result: MissionResultType.Neutral },\n    ];\n  }\n  if (count === 7) {\n    missions = [\n      { required: 2, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 2, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 1, result: MissionResultType.Neutral },\n    ];\n  }\n  if (count >= 8) {\n    missions = [\n      { required: 3, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 4, neededFails: 1, result: MissionResultType.Neutral },\n      { required: 5, neededFails: 2, result: MissionResultType.Neutral },\n      { required: 5, neededFails: 1, result: MissionResultType.Neutral },\n    ];\n  }\n  return {\n    vetos: 0,\n    missions: missions,\n  };\n}\n","import React from 'react';\nimport { VoteType, GameData, UserState, RoleType } from '../core/types';\nimport { FIREBASE } from '../core/firebase';\nimport { AllRoles } from '../core/role';\nimport { HostBox, Green, Red } from './shared';\nimport { sortObjVals } from '../core/utils';\n\ninterface Props {\n  isHost: boolean;\n  data: GameData;\n  storage: UserState;\n}\ninterface State { }\n\nexport class ViewMission extends React.Component<Props, State> {\n  id = this.props.storage.id;\n  state: State = {};\n\n  getMyRole() {\n    const { storage, data } = this.props;\n    const me = data.players[storage.id] || {\n      name: storage.name,\n    };\n    return AllRoles[me.role || RoleType.BasicBlue];\n  }\n\n  voteSuccess() {\n    const newVotes = { ...this.props.data.votes, };\n    newVotes.tally[this.id] = VoteType.Success;\n    FIREBASE.updateVotes(this.props.data.id, newVotes);\n  }\n  voteFail() {\n    if (!this.getMyRole().isRed) {\n      alert('only red players can vote fail!');\n      return;\n    }\n    const newVotes = { ...this.props.data.votes, };\n    newVotes.tally[this.id] = VoteType.Fail;\n    FIREBASE.updateVotes(this.props.data.id, newVotes);\n  }\n  voteClear() {\n    const newVotes = { ...this.props.data.votes, };\n    newVotes.tally = {};\n    FIREBASE.updateVotes(this.props.data.id, newVotes);\n  }\n  toggleReveal() {\n    const newVotes = { ...this.props.data.votes, };\n    newVotes.showResults = !newVotes.showResults;\n    FIREBASE.updateVotes(this.props.data.id, newVotes);\n  }\n\n  render() {\n    const { isHost, data } = this.props;\n    const { nominations, players, votes } = data;\n    const isNom = nominations.roster.includes(this.id);\n\n    const sortedPlayers = sortObjVals(players, p => p.id);\n    const pendingTally = sortedPlayers.filter(p => nominations.roster.includes(p.id) && !votes.tally[p.id]);\n\n    return (\n      <div>\n        <h1>Mission Vote</h1>\n\n        {isNom ? (\n          <div>\n            <h3> cast your mission vote </h3>\n            {votes.tally[this.id] ? (\n              <div> you have voted </div>\n            ) : (\n                <div>\n                  <button onClick={() => this.voteSuccess()}>vote SUCCESS</button>\n                  <button onClick={() => this.voteFail()}>vote FAIL</button>\n                </div>\n              )}\n          </div>\n        ) : (\n            <div>\n              only nominated players can vote during the mission\n            </div>\n          )}\n\n        <h3>results!</h3>\n        {votes.showResults && Object.keys(votes.tally).length ? (\n          <div>\n            {Object.values(votes.tally).sort().reverse().map((vote, i) => (\n              <div key={i}>\n                {vote === VoteType.Success ? (\n                  <Green>{vote.toUpperCase()}</Green>\n                ) : (\n                    <Red>{vote.toUpperCase()}</Red>\n                  )}\n              </div>\n            ))}\n          </div>\n        ) : (\n            <div>\n              {Object.keys(votes.tally).length}/{nominations.roster.length} votes counted\n              {pendingTally.length ? (\n                <div>\n                  <br />\n                  waiting for:\n                  {pendingTally.map(p => (\n                    <div key={p.id}>{p.name}</div>\n                  ))}\n                </div>\n              ) : ''}\n            </div>\n          )}\n\n        {isHost && (\n          <HostBox>\n            <button onClick={() => this.toggleReveal()}>{votes.showResults ? 'hide' : 'show'} votes</button>\n            <button onClick={() => this.voteClear()}>clear all votes</button>\n          </HostBox>\n        )}\n      </div>\n    );\n  }\n}\n","import { hri } from \"human-readable-ids\";\nimport { UserState, ViewTab, ViewTabType } from \"./types\";\nimport { APP_VERSION } from \"./utils\";\n\nexport interface StorageLayer {\n  getItem(key: string): string | null;\n  setItem(key: string, value: string): void;\n}\n\nclass StorageSingleton {\n  store: StorageLayer = window.localStorage;\n  onSet: (val: UserState) => Promise<void> = () => Promise.resolve();\n\n  private getMinor(v: string) {\n    return (v || '0.0.0').split('.').slice(0, 2).join('.');\n  }\n\n  reset() {\n    this.set({\n      v: APP_VERSION,\n      id: hri.random(),\n      name: undefined,\n      game: undefined,\n      view: ViewTabType.Reset,\n    });\n  }\n  private set(data: UserState): Promise<void> {\n    this.store.setItem('state', JSON.stringify(data));\n    return this.onSet(data);\n  }\n  setName(name: string) {\n    return this.set({\n      ...this.get(),\n      name: name,\n    });\n  }\n  setGame(game: string) {\n    return this.set({\n      ...this.get(),\n      game: game,\n    });\n  }\n  setView(view: ViewTab) {\n    return this.set({\n      ...this.get(),\n      view: view,\n    });\n  }\n  get(): UserState {\n    const stored = this.store.getItem('state') || '{}';\n    const data = JSON.parse(stored as any) as UserState;\n    const isValid = data && this.getMinor(data.v) === this.getMinor(APP_VERSION);\n    if (isValid) {\n      return data;\n    }\n    this.reset();\n    return this.get();\n  }\n}\n\nexport const STORAGE = new StorageSingleton();\n","import React from 'react';\nimport { STORAGE } from '../core/storage';\nimport { hri } from 'human-readable-ids';\nimport { isDev } from '../core/utils';\nimport { UserState } from '../core/types';\n\ninterface Props {\n  storage: UserState;\n  createGame(): void;\n  joinGame(id: string): void;\n}\ninterface State {\n  tempName: string;\n  tempJoin: string;\n}\n\nexport class ViewLobby extends React.Component<Props, State> {\n  state: State = {\n    tempName: isDev ? hri.random().split('-')[0] : '',\n    tempJoin: '',\n  };\n\n  setName() {\n    STORAGE.setName(this.state.tempName);\n  }\n\n  render() {\n    const { storage } = this.props;\n    const { tempName, tempJoin } = this.state;\n\n    if (!storage.name) {\n      return (\n        <div>\n          <h1>Enter your name</h1>\n          <input value={tempName} onChange={event => this.setState({ tempName: event.target.value, })} />\n          <button onClick={() => this.setName()}>confirm</button>\n        </div>\n      )\n    }\n\n    return (\n      <div>\n        <h1>Find a Game</h1>\n\n        <div>\n          <button onClick={() => this.props.createGame()}>create new game</button>\n        </div>\n\n        <h3>or</h3>\n\n        <div>\n          <input\n            value={tempJoin}\n            onChange={event => this.setState({ tempJoin: event.target.value, })}\n            placeholder=\"enter game id\"\n          />\n          <br />\n          <br />\n          <button onClick={() => this.props.joinGame(tempJoin)}>join game</button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { UserState } from '../core/types';\n\ninterface Props {\n  storage: UserState,\n  reset(): void;\n}\ninterface State { }\n\nexport class ViewReset extends React.Component<Props, State> {\n  tryReset() {\n    const { game } = this.props.storage;\n    let confirmed = true;\n    if (game) {\n      confirmed = window.confirm(\"Are you sure you want to reset?\\nIf you leave a game in progress, you will not be able to rejoin.\");\n    }\n    if (confirmed) {\n      this.props.reset();\n    }\n  }\n  render() {\n    const { storage } = this.props;\n    return (\n      <div>\n        <h1>Current Local State</h1>\n        <pre>\n          {JSON.stringify(storage, null, 2)}\n        </pre>\n        <div>\n          <button onClick={() => this.tryReset()}>reset everything</button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { GameData, MissionResults, UserState } from '../core/types';\nimport { FIREBASE } from '../core/firebase';\nimport { HostBox, Board, MissionIcon } from './shared';\n\ninterface Props {\n  data: GameData;\n  isHost: boolean;\n  storage: UserState;\n}\ninterface State { }\n\nexport class ViewGame extends React.Component<Props, State> {\n  nextTurn() {\n    const { id, turn, nominations, votes } = this.props.data;\n    if (!turn) { return; }\n    const currentIndex = turn.order.indexOf(turn.current);\n    const nextIndex = (currentIndex + 1) % turn.order.length;\n    const newCurrent = turn.order[nextIndex];\n    FIREBASE.updateTurn(id, {\n      ...turn,\n      current: newCurrent,\n    });\n    FIREBASE.updateNominations(id, {\n      ...nominations,\n      roster: [],\n      showResults: false,\n      tally: {},\n    });\n    FIREBASE.updateVotes(id, {\n      ...votes,\n      showResults: false,\n      tally: {},\n    });\n  }\n  missionChange(mIndex: number) {\n    const { isHost, data } = this.props;\n    if (!isHost) { return; }\n    const { id, board } = data;\n    const mission = board.missions[mIndex];\n    const currIndex = MissionResults.indexOf(mission.result);\n    const nextIndex = (currIndex + 1) % MissionResults.length;\n    const nextState = MissionResults[nextIndex];\n    mission.result = nextState;\n    FIREBASE.updateBoard(id, board);\n  }\n\n  setMissionNoms(mIndex: number) {\n    const { isHost, data } = this.props;\n    if (!isHost) { return; }\n    const { id, board } = data;\n    const mission = board.missions[mIndex];\n    mission.roster = data.nominations.roster;\n    FIREBASE.updateBoard(id, board);\n  }\n  clearMissionNoms(mIndex: number) {\n    const { isHost, data } = this.props;\n    if (!isHost) { return; }\n    const { id, board } = data;\n    const mission = board.missions[mIndex];\n    mission.roster = null;\n    FIREBASE.updateBoard(id, board);\n  }\n  addVeto(delta: number) {\n    const { isHost, data } = this.props;\n    if (!isHost) { return; }\n    const { id, vetoes } = data;\n    FIREBASE.updateVetoes(id, vetoes + delta);\n  }\n\n  render() {\n    const { isHost, data } = this.props;\n    const { board, turn, players, vetoes } = data;\n    const anyDoubleFails = board.missions.some(m => m.neededFails > 1);\n\n    return (\n      <div>\n        <h1>Game #{data.id}</h1>\n        {turn && (\n          <div>\n            {isHost && (\n              <HostBox>\n                <button onClick={() => this.nextTurn()}>\n                  Next Turn\n                </button>\n              </HostBox>\n            )}\n          </div>\n        )}\n\n        <Board>\n          {board.missions.map((m, index) => (\n            <div key={index}>\n              <MissionIcon result={m.result} onClick={() => this.missionChange(index)}>\n                {m.required}\n              </MissionIcon>\n              {anyDoubleFails && (\n                m.neededFails > 1 ? (\n                  <div>\n                    {m.neededFails} fails needed\n                  </div>\n                ) : <br />\n              )}\n              {m.roster && m.roster.map(pid => (\n                <div key={pid}>\n                  {players[pid].name}\n                </div>\n              ))}\n              {isHost && (\n                <HostBox>\n                  {m.roster ? (\n                    <button onClick={() => this.clearMissionNoms(index)}>\n                      remove<br />noms\n                    </button>\n                  ) : (\n                      <button onClick={() => this.setMissionNoms(index)}>\n                        set<br />noms\n                      </button>\n                    )}\n                </HostBox>\n              )}\n            </div>\n          ))}\n        </Board>\n        <div>\n          Missions are played left to right. The number is how many people are required for each mission.\n          <br />\n          It only takes 1 FAIL to win the mission for Red. First team to 3 missions wins.\n        </div>\n\n        <h3>\n          Vetoes: {vetoes}/4\n        </h3>\n        <div>\n          When the number of vetoes reaches 4, the nomination automatically goes to mission without a group vote.\n        </div>\n\n        {isHost && (\n          <HostBox>\n            <button onClick={() => this.addVeto(1)}>+</button>\n            <button onClick={() => this.addVeto(-1)}>-</button>\n          </HostBox>\n        )}\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { AllRoles } from '../core/role';\nimport { GameData, Role, Roles, UserState } from '../core/types';\nimport { getBoardFor, shuffle, sortObjVals } from \"../core/utils\";\nimport { FIREBASE } from '../core/firebase';\nimport { HostBox } from './shared';\n\nconst DeleteLink = styled.span`\n  cursor: pointer;\n  text-decoration: underline;\n  color: red;\n`;\n\nconst ErrorMessage = styled.span`\n  color: red;\n`;\n\ninterface Props {\n  isHost: boolean;\n  data: GameData;\n  storage: UserState;\n}\ninterface State {\n  errorMessage?: string;\n}\n\nexport class ViewSetup extends React.Component<Props, State> {\n  state: State = {}\n\n  addRole(role: Role) {\n    const newRoles = [...this.props.data.roles];\n    newRoles.push(role);\n    newRoles.sort();\n    FIREBASE.updateRoles(this.props.data.id, newRoles);\n  }\n  removeRole(role: Role) {\n    const newRoles = [...this.props.data.roles];\n    const index = newRoles.findIndex(r => r === role);\n    if (index >= 0) {\n      newRoles.splice(index, 1);\n      FIREBASE.updateRoles(this.props.data.id, newRoles);\n    }\n  }\n  assign() {\n    const { id, players, roles } = this.props.data;\n    if (Object.keys(players).length !== roles.length) {\n      return this.setState({\n        errorMessage: 'you need the same number of roles as players',\n      });\n    }\n    this.setState({ errorMessage: undefined });\n    const shuffledPlayers = shuffle(Object.keys(players));\n    const shuffledRoles = shuffle(roles);\n    shuffledPlayers.forEach((id, index) => {\n      players[id].role = shuffledRoles[index];\n    });\n    FIREBASE.updateBoard(id, getBoardFor(roles.length));\n    FIREBASE.updatePlayers(id, players);\n    FIREBASE.updateTurn(id, {\n      current: shuffledPlayers[0],\n      order: shuffledPlayers,\n    });\n  }\n  clear() {\n    const { id, players } = this.props.data;\n    Object.keys(players).forEach((id, index) => {\n      players[id].role = null; // null for Firebase\n    });\n    FIREBASE.updatePlayers(id, players);\n    FIREBASE.updateTurn(id, null);\n  }\n\n  renderRoles(roles: Role[], canEdit: boolean) {\n    return (\n      <ul>\n        {roles.map((role, i) => (\n          <li key={i}>\n            {canEdit && <DeleteLink onClick={() => this.removeRole(role)}>X</DeleteLink>}\n            {AllRoles[role].name}\n          </li>\n        ))}\n      </ul>\n    );\n  }\n  renderAdd(roles: Role[]) {\n    return (\n      <div>\n        {roles.map((r, i) => (\n          <button key={i} onClick={() => this.addRole(r)}>\n            {AllRoles[r].name}\n          </button>\n        ))}\n      </div>\n    )\n  }\n  render() {\n    const { isHost, data } = this.props;\n    const { errorMessage } = this.state;\n\n    const isAssigned = Object.values(data.players).some(p => p.role);\n    const canEdit = isHost && !isAssigned;\n\n    const redRoles = Object.values(data.roles).filter(r => AllRoles[r].isRed);\n    const blueRoles = Object.values(data.roles).filter(r => !AllRoles[r].isRed);\n\n    const sortedPlayers = sortObjVals(data.players, p => p.name);\n\n    return (\n      <div>\n        <h1>Setup</h1>\n\n        <h3>\n          Players: {sortedPlayers.length}\n        </h3>\n        <div>\n          {sortedPlayers.map(o => o.name).join(', ')}\n        </div>\n\n        {isHost && (\n          <HostBox>\n            {isAssigned ? (\n              <div>\n                <button onClick={() => this.clear()}>CLEAR ROLES (reset game)</button>\n              </div>\n            ) : (\n                <div>\n                  {this.renderAdd(Roles.filter(r => AllRoles[r].isRed))}\n                  <br />\n                  {this.renderAdd(Roles.filter(r => !AllRoles[r].isRed))}\n                  <br />\n                  <button onClick={() => this.assign()}>ASSIGN ROLES</button>\n                  {errorMessage && (\n                    <ErrorMessage>{errorMessage}</ErrorMessage>\n                  )}\n                </div>\n              )}\n          </HostBox>\n        )}\n\n        <h3>Red Roles ({redRoles.length})</h3>\n        {this.renderRoles(redRoles, canEdit)}\n\n        <h3>Blue Roles ({blueRoles.length})</h3>\n        {this.renderRoles(blueRoles, canEdit)}\n\n        {isHost && (\n          <HostBox>\n            <h3>Kick Player</h3>\n            <p>\n              Mostly an emergency tool if someone resets their info.\n              <br />\n              If the player refreshes without resetting their info, they will rejoin.\n            </p>\n\n            {sortedPlayers.map(p => (\n              <button key={p.id} onClick={() => FIREBASE.kickPlayer(data, p.id)}>\n                {p.name}\n              </button>\n            ))}\n          </HostBox>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { CSSProperties } from 'react';\nimport styled from 'styled-components';\nimport { AllRoles } from '../core/role';\nimport { GameData, RoleType, UserState } from '../core/types';\nimport { StyledBox } from './shared';\n\nexport const SecretBox = styled(StyledBox)`\n  background-color: black;\n  color: white;\n  border-color: red;\n`;\n\nexport const RoleBox = styled(StyledBox)`\n  border-color: black;\n  background-color: #eeeeee;\n\n  & span {\n    margin: 0 0.1em;\n  }\n`;\n\ninterface Props {\n  storage: UserState;\n  data: GameData;\n}\ninterface State { }\n\nexport class ViewBar extends React.Component<Props, State> {\n  render() {\n    const { storage, data } = this.props;\n    const me = data.players[storage.id] || {\n      name: storage.name,\n    };\n    const myData = AllRoles[me.role || RoleType.BasicBlue];\n    const others = Object.keys(data.players).filter(id => id !== storage.id).map(key => data.players[key]);\n    const youSee = others.filter(o => o.role && myData.sees.includes(o.role)).map(o => o.name);\n\n    const nominations = data.nominations.roster.length > 0 ? data.nominations.roster.map(pid => data.players[pid].name).join(', ') : '(nobody)';\n    const playerIds = data.turn ? data.turn.order : Object.keys(data.players).sort();\n\n    return (\n      <div>\n        <SecretBox>\n          <div><u>secret info! do not discuss what's in this box!</u></div>\n          {me.role ? (\n            <div>\n              you are: <b>{myData.name}</b>. you see: <b>{youSee.join(', ') || '(nobody)'}</b>\n              <br />\n              {myData.description}\n            </div>\n          ) : (\n              <div>\n                roles haven't been assigned yet\n              </div>\n            )}\n        </SecretBox>\n        <RoleBox>\n          <div>\n            turn order: {playerIds.map((pid, index, array) => {\n            const pdata = data.players[pid];\n            const name = (pdata ? pdata.name : '???') + (index < array.length - 1 ? ',' : '');\n            const style: CSSProperties = {\n              color: pid === data.host ? 'purple' : 'black',\n              textDecoration: (data.turn && pid === data.turn.current) ? 'underline' : 'none',\n            };\n            return (\n              <span key={pid} style={style}>\n                {name}\n              </span>\n            );\n          })}\n          </div>\n          <div>\n            nomination: {nominations}\n          </div>\n        </RoleBox>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { GameData, NominationType, MissionResultType, UserState } from '../core/types';\nimport { FIREBASE } from '../core/firebase';\nimport { HostBox, Green, Red } from './shared';\nimport { sortObjVals } from '../core/utils';\n\ninterface Props {\n  isHost: boolean;\n  data: GameData;\n  storage: UserState;\n}\ninterface State { }\n\nexport class ViewNominate extends React.Component<Props, State> {\n  id = this.props.storage.id;\n  state: State = {};\n\n  voteSuccess() {\n    const newVotes = { ...this.props.data.nominations, };\n    newVotes.tally[this.id] = NominationType.Approve;\n    FIREBASE.updateNominations(this.props.data.id, newVotes);\n  }\n  voteFail() {\n    const newVotes = { ...this.props.data.nominations, };\n    newVotes.tally[this.id] = NominationType.Reject;\n    FIREBASE.updateNominations(this.props.data.id, newVotes);\n  }\n  voteClear() {\n    const newVotes = { ...this.props.data.nominations, };\n    newVotes.tally = {};\n    FIREBASE.updateNominations(this.props.data.id, newVotes);\n  }\n  toggleReveal() {\n    const newVotes = { ...this.props.data.nominations, };\n    newVotes.showResults = !newVotes.showResults;\n    FIREBASE.updateNominations(this.props.data.id, newVotes);\n  }\n\n  addToRoster(pid: string) {\n    const { nominations } = this.props.data;\n    const newRoster = [...nominations.roster];\n    newRoster.push(pid);\n    newRoster.sort();\n    FIREBASE.updateNominations(this.props.data.id, {\n      ...nominations,\n      roster: newRoster,\n    });\n  }\n  removeFromRoster(pid: string) {\n    const { nominations } = this.props.data;\n    const newRoster = [...nominations.roster];\n    const index = newRoster.findIndex(p => p === pid);\n    if (index >= 0) {\n      newRoster.splice(index, 1);\n      FIREBASE.updateNominations(this.props.data.id, {\n        ...nominations,\n        roster: newRoster,\n      });\n    }\n  }\n\n  render() {\n    const { isHost, data } = this.props;\n    const { nominations, players } = data;\n    const isDealer = data.turn && data.turn.current === this.id && !nominations.showResults;\n    const sortedPlayers = sortObjVals(players, p => p.id);\n    const outOfRoster = sortedPlayers.filter(p => !nominations.roster.includes(p.id));\n    const sortedTally = Object.keys(nominations.tally).sort();\n    const pendingTally = sortedPlayers.filter(p => !nominations.tally[p.id]);\n\n    const currentMission = data.board.missions.filter(m => m.result === MissionResultType.Neutral)[0];\n    const currentNeeded = currentMission ? currentMission.required : '???';\n\n    return (\n      <div>\n        <h1>Nominate for Mission</h1>\n\n        <div>This mission requires {currentNeeded} people.</div>\n\n        <h3>Nominated:</h3>\n        <div>\n          {nominations.roster.length ? (\n            isDealer ? nominations.roster.map((pid, i) => (\n              <button key={i} onClick={() => this.removeFromRoster(pid)}>\n                {players[pid].name}\n              </button>\n            )) : (\n                nominations.roster.map(pid => players[pid].name).join(', ')\n              )\n          ) : (\n              'nobody has been nominated yet'\n            )}\n        </div>\n\n        {isDealer && (\n          <div>\n            <h3>Not Nominated:</h3>\n            <div>\n              {outOfRoster.length > 0 ? (\n                outOfRoster.map((p, i) => (\n                  <button key={i} onClick={() => this.addToRoster(p.id)}>\n                    {p.name}\n                  </button>\n                ))\n              ) : (\n                  'everyone has been nominated'\n                )}\n            </div>\n          </div>\n        )}\n\n        <h3>cast your vote for who goes on the mission</h3>\n\n        {nominations.tally[this.id] && (\n          <div>\n            <div> you have voted </div>\n          </div>\n        )}\n        {!nominations.showResults && (\n          <div>\n            <button onClick={() => this.voteSuccess()}>vote SUPPORT</button>\n            <button onClick={() => this.voteFail()}>vote REJECT</button>\n          </div>\n        )}\n\n        {isHost && (\n          <HostBox>\n            <button onClick={() => this.toggleReveal()}>{nominations.showResults ? 'hide' : 'show'} votes</button>\n            <button onClick={() => this.voteClear()}>clear all votes</button>\n          </HostBox>\n        )}\n\n        <h3>results!</h3>\n\n        {nominations.showResults && Object.keys(nominations.tally).length ? (\n          <div>\n            {sortedTally.map((pid, i) => (\n              <div key={i}>\n                {data.players[pid].name}:&nbsp;\n                {nominations.tally[pid] === NominationType.Approve ? (\n                  <Green>{nominations.tally[pid].toUpperCase()}</Green>\n                ) : (\n                    <Red>{nominations.tally[pid].toUpperCase()}</Red>\n                  )}\n              </div>\n            ))}\n          </div>\n        ) : (\n            <div>\n              {Object.keys(nominations.tally).length}/{Object.keys(players).length} votes counted\n              {pendingTally.length ? (\n                <div>\n                  <br />\n                  waiting for:\n                  {pendingTally.map(p => (\n                    <div key={p.id}>{p.name}</div>\n                  ))}\n                </div>\n              ) : ''}\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ViewDebug } from \"./ViewDebug\";\nimport { ViewMission } from \"./ViewMission\";\nimport { ViewLobby } from \"./ViewLobby\";\nimport { ViewReset } from \"./ViewReset\";\nimport { FIREBASE } from \"../core/firebase\";\nimport { GameData, PlayerData, UserState, ViewTabType, ViewTab } from \"../core/types\";\nimport { isDebug, getBoardFor, randomId, APP_VERSION } from \"../core/utils\";\nimport { STORAGE } from \"../core/storage\";\nimport { ViewGame } from \"./ViewGame\";\nimport { ViewSetup } from \"./ViewSetup\";\nimport { ViewBar } from \"./ViewBar\";\nimport { ViewNominate } from \"./ViewNominate\";\nimport { StyledBox } from \"./shared\";\n\nconst HeaderLink = styled(StyledBox) <{ current: boolean, hasLink: boolean }>`\n  margin: 0 0.5em;\n  margin-top: 0;\n  border-color: #00000000;\n  border-top-width: 0;\n  & a {\n    color: inherit;\n  }\n\n  ${props => props.hasLink ? `\n    & span {\n      cursor: pointer;\n      text-decoration: underline;\n    }\n  ` : ''}\n\n  ${props => props.current ? `\n    border-color: grey;\n  ` : ''}\n\n  &:first-child {\n    margin-left: 0;\n  }\n`;\n\ninterface Props { }\ninterface State {\n  storage: UserState;\n  data?: GameData;\n}\n\ninterface LinkProps {\n  type?: ViewTab;\n}\n\nexport class ViewHub extends React.Component<Props, State> {\n  state: State = {\n    storage: STORAGE.get(),\n  };\n  componentDidMount() {\n    STORAGE.onSet = val => new Promise((resolve, reject) => {\n      this.setState({ storage: val }, resolve);\n    });\n    const { storage } = this.state;\n    if (storage.name && storage.game) {\n      this.join(this.genGuestGameData());\n    } else {\n      STORAGE.setView(ViewTabType.Lobby);\n    }\n  }\n\n  private genHostGameData(): GameData {\n    const { id } = this.state.storage;\n    return {\n      ...this.genGuestGameData(),\n      host: id,\n    };\n  }\n  private genGuestGameData(): GameData {\n    const { id, name, game } = this.state.storage;\n    if (!game) {\n      throw new Error('game should be set in localStorage');\n    }\n    return {\n      id: game,\n      host: undefined,\n      board: getBoardFor(7),\n      nominations: {\n        showResults: false,\n        roster: [],\n        tally: {},\n      },\n      roles: [],\n      players: {\n        [id]: {\n          id: id,\n          name: name || '???',\n        },\n      },\n      turn: null,\n      vetoes: 0,\n      votes: {\n        showResults: false,\n        tally: {},\n      },\n    };\n  }\n\n  private async join(localData: GameData) {\n    const { storage } = this.state;\n    if (localData.host) {\n      FIREBASE.updateGame(localData);\n    } else {\n      // if joining a game, ensure self and broadcast\n      const hostData = await FIREBASE.getGameData(localData.id);\n      if (!hostData) {\n        // if no game data for old id, reset\n        this.reset();\n        return;\n      }\n\n      // add self to host.players, but prefer local name\n      const myId = storage.id;\n      const localMe = localData.players[myId];\n      const remoteMe = hostData.players[myId] || {};\n      const players: PlayerData = {\n        ...hostData.players,\n        [myId]: {\n          ...localMe,\n          ...remoteMe,\n          name: localMe.name,\n        },\n      };\n      FIREBASE.updatePlayers(localData.id, players);\n    }\n    if (storage.view === ViewTabType.Lobby) {\n      STORAGE.setView(ViewTabType.Game);\n    }\n    FIREBASE.joinGame(localData.id, data => this.onReceive(data));\n  }\n  private onReceive(data: GameData) {\n    console.log('received:', data);\n    this.setState({\n      data: {\n        roles: [],\n        turn: null,\n        ...data,\n        nominations: {\n          roster: [],\n          tally: {},\n          ...data.nominations,\n        },\n        votes: {\n          tally: {},\n          ...data.votes,\n        },\n      }\n    });\n  }\n\n  async createGame() {\n    await STORAGE.setGame(randomId(3));\n    this.join(this.genHostGameData());\n  }\n  async joinGame(gameId: string) {\n    await STORAGE.setGame(gameId);\n    this.join(this.genGuestGameData());\n  }\n  reset() {\n    const { storage } = this.state;\n    if (storage.game) {\n      FIREBASE.leaveGame(storage.game);\n    }\n    STORAGE.reset();\n    this.setState({\n      data: undefined,\n    });\n  }\n\n  renderMain() {\n    const { storage, data } = this.state;\n    const { id, view } = storage;\n    const isHost = !!data && id === data.host;\n    if (view === ViewTabType.Game && data) {\n      return <ViewGame isHost={isHost} data={data} storage={storage} />\n    }\n    if (view === ViewTabType.Setup && data) {\n      return <ViewSetup isHost={isHost} data={data} storage={storage} />\n    }\n    if (view === ViewTabType.Nominate && data) {\n      return <ViewNominate isHost={isHost} data={data} storage={storage} />\n    }\n    if (view === ViewTabType.Mission && data) {\n      return <ViewMission isHost={isHost} data={data} storage={storage} />\n    }\n\n    if (view === ViewTabType.Lobby && !data) {\n      return <ViewLobby\n        storage={storage}\n        createGame={() => this.createGame()}\n        joinGame={id => this.joinGame(id)}\n      />\n    }\n\n    if (view === ViewTabType.Reset) {\n      return <ViewReset\n        storage={storage}\n        reset={() => this.reset()}\n      />\n    }\n    if (view === ViewTabType.Debug) {\n      return <ViewDebug />\n    }\n\n    if (view === ViewTabType.Loading) {\n      return (\n        <h3>\n          connecting to server, please wait...\n        </h3>\n      );\n    }\n\n    return (\n      <div>\n        <h3>you have reached an invalid state :(</h3>\n        <div>view: {view}</div>\n        <div>data: {!!data}</div>\n        <h3>please try refreshing and/or reset your local state</h3>\n      </div>\n    )\n  }\n\n  Link: React.StatelessComponent<LinkProps> = (props) => {\n    const { type } = props;\n    const onClick = !!type ? () => STORAGE.setView(type) : () => { };\n    return (\n      <HeaderLink\n        current={type === this.state.storage.view}\n        hasLink={!!type}\n        onClick={onClick}\n      >\n        <span>{props.children}</span>\n      </HeaderLink>\n    );\n  }\n\n  render() {\n    const { storage, data } = this.state;\n    return (\n      <div>\n        <nav>\n          <ul>\n            {data && <this.Link type={ViewTabType.Game}>Game #{data.id}</this.Link>}\n            {data && <this.Link type={ViewTabType.Nominate}>Nominate</this.Link>}\n            {data && <this.Link type={ViewTabType.Mission}>Mission</this.Link>}\n            {data && <this.Link type={ViewTabType.Setup}>Setup</this.Link>}\n            {!data && <this.Link type={ViewTabType.Lobby}>Lobby</this.Link>}\n            <this.Link type={ViewTabType.Reset}>Reset</this.Link>\n            {isDebug && <this.Link type={ViewTabType.Debug}>Debug</this.Link>}\n            <this.Link>\n              <a target=\"_blank\" href=\"rules.pdf\">Rules</a>\n            </this.Link>\n            <this.Link>v.{APP_VERSION}</this.Link>\n          </ul>\n        </nav>\n\n        {data && (\n          <ViewBar data={data} storage={storage} />\n        )}\n\n        {this.renderMain()}\n\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { ViewHub } from './fe/ViewHub';\n\nReactDOM.render(\n  <ViewHub />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}